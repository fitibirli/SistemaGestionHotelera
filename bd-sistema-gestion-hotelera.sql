-- MySQL Script generated by MySQL Workbench
-- 05/30/16 18:02:39
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema bd-sistema-gestion-hotelera
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema bd-sistema-gestion-hotelera
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `bd-sistema-gestion-hotelera` DEFAULT CHARACTER SET utf8 ;
USE `bd-sistema-gestion-hotelera` ;

-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Direccion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Direccion` (
  `idDireccion` INT NOT NULL,
  `calle` VARCHAR(80) NULL,
  `numero` INT NULL,
  `cp` VARCHAR(45) NULL,
  PRIMARY KEY (`idDireccion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Servicio`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Servicio` (
  `idServicio` INT NOT NULL,
  `nombre` VARCHAR(45) NULL,
  `descripcion` VARCHAR(45) NULL,
  `precio` DOUBLE NULL,
  PRIMARY KEY (`idServicio`))
ENGINE = InnoDB
COMMENT = '		';


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Contacto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Contacto` (
  `idContacto` INT NOT NULL,
  `telParticular` MEDIUMTEXT NULL,
  `telCelular` MEDIUMTEXT NULL,
  `cp` VARCHAR(45) NULL,
  PRIMARY KEY (`idContacto`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Hotel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Hotel` (
  `cuil` VARCHAR(13) NOT NULL,
  `nombre` VARCHAR(45) NULL,
  `categoria` INT NULL,
  `checkin` TIME(4) NULL,
  `chekout` TIME(4) NULL,
  `idDireccion` INT NOT NULL,
  `idServicio` INT NOT NULL,
  `idContacto` INT NOT NULL,
  PRIMARY KEY (`cuil`, `idDireccion`, `idContacto`),
  INDEX `fk_Hotel_Direccion2_idx` (`idDireccion` ASC),
  INDEX `fk_Hotel_Servicio1_idx` (`idServicio` ASC),
  INDEX `fk_Hotel_Contacto1_idx` (`idContacto` ASC),
  CONSTRAINT `fk_Hotel_Direccion2`
    FOREIGN KEY (`idDireccion`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Direccion` (`idDireccion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Hotel_Servicio1`
    FOREIGN KEY (`idServicio`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Servicio` (`idServicio`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Hotel_Contacto1`
    FOREIGN KEY (`idContacto`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Contacto` (`idContacto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Habitacion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Habitacion` (
  `idHabitacion` INT NOT NULL,
  `capacidadMax` INT NULL,
  `disponibilidad` TINYINT(1) NULL,
  `precio` DOUBLE NULL,
  PRIMARY KEY (`idHabitacion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`TipoHabitacion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`TipoHabitacion` (
  `idTipoHabitacion` INT NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  `idHabitacion` INT NOT NULL,
  PRIMARY KEY (`idTipoHabitacion`),
  INDEX `fk_TipoHabitacion_Habitacion1_idx` (`idHabitacion` ASC),
  CONSTRAINT `fk_TipoHabitacion_Habitacion1`
    FOREIGN KEY (`idHabitacion`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Habitacion` (`idHabitacion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`FormaDePago`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`FormaDePago` (
  `idFormaDePago` INT NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`idFormaDePago`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Privilegio`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Privilegio` (
  `idPrivilegio` INT NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`idPrivilegio`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Login`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Login` (
  `idLogin` INT NOT NULL,
  `usuario` VARCHAR(100) NULL,
  `clave` VARCHAR(45) NULL,
  `idPrivilegio` INT NOT NULL,
  PRIMARY KEY (`idLogin`, `idPrivilegio`),
  INDEX `fk_Login_Privilegio1_idx` (`idPrivilegio` ASC),
  CONSTRAINT `fk_Login_Privilegio1`
    FOREIGN KEY (`idPrivilegio`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Privilegio` (`idPrivilegio`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Recibo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Recibo` (
  `idRecibo` INT NOT NULL,
  `fecha` DATE NULL,
  `importe` DOUBLE NULL,
  `idFormaDePago` INT NOT NULL,
  PRIMARY KEY (`idRecibo`),
  INDEX `fk_Recibo_FormaDePago1_idx` (`idFormaDePago` ASC),
  CONSTRAINT `fk_Recibo_FormaDePago1`
    FOREIGN KEY (`idFormaDePago`)
    REFERENCES `bd-sistema-gestion-hotelera`.`FormaDePago` (`idFormaDePago`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Cliente` (
  `idCliente` INT NOT NULL,
  `nombre` VARCHAR(45) NULL,
  `apellido` VARCHAR(45) NULL,
  `dni` INT NULL,
  `idDireccion` INT NOT NULL,
  `idContacto` INT NOT NULL,
  `idLogin` INT NOT NULL,
  `Recibo_idRecibo` INT NOT NULL,
  PRIMARY KEY (`idCliente`, `idDireccion`, `idContacto`, `idLogin`),
  INDEX `fk_Cliente_Direccion1_idx` (`idDireccion` ASC),
  INDEX `fk_Cliente_Contacto1_idx` (`idContacto` ASC),
  INDEX `fk_Cliente_Login1_idx` (`idLogin` ASC),
  INDEX `fk_Cliente_Recibo1_idx` (`Recibo_idRecibo` ASC),
  CONSTRAINT `fk_Cliente_Direccion1`
    FOREIGN KEY (`idDireccion`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Direccion` (`idDireccion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Cliente_Contacto1`
    FOREIGN KEY (`idContacto`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Contacto` (`idContacto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Cliente_Login1`
    FOREIGN KEY (`idLogin`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Login` (`idLogin`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Cliente_Recibo1`
    FOREIGN KEY (`Recibo_idRecibo`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Recibo` (`idRecibo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`TipoEstado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`TipoEstado` (
  `idTipoEstado` INT NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`idTipoEstado`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Estadia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Estadia` (
  `idEstadia` INT NOT NULL,
  `fIngreso` DATE NULL,
  `fEgreso` DATE NULL,
  `idCliente` INT NOT NULL,
  `idTipoEstado` INT NOT NULL,
  PRIMARY KEY (`idEstadia`, `idCliente`, `idTipoEstado`),
  INDEX `fk_Estadia_Cliente1_idx` (`idCliente` ASC),
  INDEX `fk_Estadia_TipoEstado1_idx` (`idTipoEstado` ASC),
  CONSTRAINT `fk_Estadia_Cliente1`
    FOREIGN KEY (`idCliente`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Cliente` (`idCliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Estadia_TipoEstado1`
    FOREIGN KEY (`idTipoEstado`)
    REFERENCES `bd-sistema-gestion-hotelera`.`TipoEstado` (`idTipoEstado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`TipoEmpleado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`TipoEmpleado` (
  `idTipoEmpleado` INT NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`idTipoEmpleado`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Empleado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Empleado` (
  `legajo` INT NOT NULL,
  `nombre` VARCHAR(45) NULL,
  `apellido` VARCHAR(45) NULL,
  `dni` INT NULL,
  `fechaNacimiento` DATE NULL,
  `idContacto` INT NOT NULL,
  `idLogin` INT NOT NULL,
  `idTipoEmpleado` INT NOT NULL,
  PRIMARY KEY (`legajo`, `idContacto`, `idLogin`, `idTipoEmpleado`),
  INDEX `fk_Empleado_Contacto1_idx` (`idContacto` ASC),
  INDEX `fk_Empleado_Login1_idx` (`idLogin` ASC),
  INDEX `fk_Empleado_TipoEmpleado1_idx` (`idTipoEmpleado` ASC),
  CONSTRAINT `fk_Empleado_Contacto1`
    FOREIGN KEY (`idContacto`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Contacto` (`idContacto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Empleado_Login1`
    FOREIGN KEY (`idLogin`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Login` (`idLogin`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Empleado_TipoEmpleado1`
    FOREIGN KEY (`idTipoEmpleado`)
    REFERENCES `bd-sistema-gestion-hotelera`.`TipoEmpleado` (`idTipoEmpleado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`ItemFactura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`ItemFactura` (
  `idItemFactura` INT NOT NULL,
  `cantidad` INT NULL,
  PRIMARY KEY (`idItemFactura`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Factura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Factura` (
  `idFactura` INT NOT NULL,
  `fechaEmision` DATE NULL,
  `legajo` INT NOT NULL,
  `idCliente` INT NOT NULL,
  `idItemFactura` INT NOT NULL,
  PRIMARY KEY (`idFactura`, `legajo`),
  INDEX `fk_Factura_Empleado1_idx` (`legajo` ASC),
  INDEX `fk_Factura_Cliente1_idx` (`idCliente` ASC),
  INDEX `fk_Factura_Item1_idx` (`idItemFactura` ASC),
  CONSTRAINT `fk_Factura_Empleado1`
    FOREIGN KEY (`legajo`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Empleado` (`legajo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Factura_Cliente1`
    FOREIGN KEY (`idCliente`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Cliente` (`idCliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Factura_Item1`
    FOREIGN KEY (`idItemFactura`)
    REFERENCES `bd-sistema-gestion-hotelera`.`ItemFactura` (`idItemFactura`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`TipoTicket`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`TipoTicket` (
  `idTipoTicket` INT NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`idTipoTicket`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`Ticket`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`Ticket` (
  `idTicket` INT NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  `idServicio` INT NOT NULL,
  `idFactura` INT NOT NULL,
  `idEstadia` INT NOT NULL,
  `legajo` INT NOT NULL,
  `idTipoTicket` INT NOT NULL,
  PRIMARY KEY (`idTicket`, `legajo`),
  INDEX `fk_Ticket_Servicio1_idx` (`idServicio` ASC),
  INDEX `fk_Ticket_Factura1_idx` (`idFactura` ASC),
  INDEX `fk_Ticket_Estadia1_idx` (`idEstadia` ASC),
  INDEX `fk_Ticket_Empleado1_idx` (`legajo` ASC),
  INDEX `fk_Ticket_TipoTicket1_idx` (`idTipoTicket` ASC),
  CONSTRAINT `fk_Ticket_Servicio1`
    FOREIGN KEY (`idServicio`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Servicio` (`idServicio`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ticket_Factura1`
    FOREIGN KEY (`idFactura`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Factura` (`idFactura`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ticket_Estadia1`
    FOREIGN KEY (`idEstadia`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Estadia` (`idEstadia`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ticket_Empleado1`
    FOREIGN KEY (`legajo`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Empleado` (`legajo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ticket_TipoTicket1`
    FOREIGN KEY (`idTipoTicket`)
    REFERENCES `bd-sistema-gestion-hotelera`.`TipoTicket` (`idTipoTicket`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`ReporteLimpieza`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`ReporteLimpieza` (
  `idReporteLimpieza` INT NOT NULL,
  `fecha` DATE NULL,
  `desperfeto` VARCHAR(45) NULL,
  `legajo` INT NOT NULL,
  PRIMARY KEY (`idReporteLimpieza`),
  INDEX `fk_ReporteLimpieza_Empleado1_idx` (`legajo` ASC),
  CONSTRAINT `fk_ReporteLimpieza_Empleado1`
    FOREIGN KEY (`legajo`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Empleado` (`legajo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`ReporteMantenimiento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`ReporteMantenimiento` (
  `idReporte` INT NOT NULL,
  `reparacion` VARCHAR(45) NULL,
  `fOrigen` DATE NULL,
  `fResolucion` DATE NULL,
  `desperfecto` VARCHAR(80) NULL,
  `terminado` TINYINT(1) NULL,
  `legajo` INT NOT NULL,
  PRIMARY KEY (`idReporte`),
  INDEX `fk_ReporteMantenimiento_Empleado1_idx` (`legajo` ASC),
  CONSTRAINT `fk_ReporteMantenimiento_Empleado1`
    FOREIGN KEY (`legajo`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Empleado` (`legajo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd-sistema-gestion-hotelera`.`HabitacionEstadia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd-sistema-gestion-hotelera`.`HabitacionEstadia` (
  `idHabitacion` INT NOT NULL,
  `idEstadia` INT NOT NULL,
  PRIMARY KEY (`idHabitacion`, `idEstadia`),
  INDEX `fk_Habitacion_has_Estadia_Estadia1_idx` (`idEstadia` ASC),
  INDEX `fk_Habitacion_has_Estadia_Habitacion1_idx` (`idHabitacion` ASC),
  CONSTRAINT `fk_Habitacion_has_Estadia_Habitacion1`
    FOREIGN KEY (`idHabitacion`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Habitacion` (`idHabitacion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Habitacion_has_Estadia_Estadia1`
    FOREIGN KEY (`idEstadia`)
    REFERENCES `bd-sistema-gestion-hotelera`.`Estadia` (`idEstadia`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
